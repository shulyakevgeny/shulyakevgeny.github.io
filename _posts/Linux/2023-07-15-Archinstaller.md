---
layout: post
title: Запускаем скрипт установки Arch Linux
category: Linux
---

#archinstaller

## Запускаем скрипт установки Arch Linux

Первым делом, необходимо после скачивания Arch Linux с официального сайта записать образ на установочный носитель. Как вариант, создать USB флешку с помощью утилиты Ventoy, на которую и закинуть установочный IOS образ Arch Linux. 

После загрузки с установочного USB носителя, выбираем пункт **“Arch Linux install medium”**

Теперь необходимо выставить шрифт, если этого не сделать, то при выборе Русского языка в “установщике” **archinstall**, вы увидите квадратики вместо букв. Выбираем шрифт “cyr-sun16”, введя команду:

**setfont cyr-sun16**

После выбора шрифта, можно приступить к запуску установочного скрипта archinstall, вводим команду:

**archinstall**

## Выбираем локаль

Приступаем к установке, для этого пробежимся по всем предложенным пунктами и выставим необходимые значения. Начнем с выбора языка самого установщика, нажимаем на пункт “Archinstall lanquage”

Раскладку клавиатуры можно выбрать на данном этапе установки, а можно уже в установленной системе при ее настройке, это кому как удобно

И все же, лучше выбрать ее уже в установленной системе, по этому, пропускаем данный шаг и двигаемся дальше.

А дальше у нас предстоит выбор зеркала, откуда и будут устанавливаться пакеты. Выбираем данный пункт и ищем в нем “Russia”, для быстрого поиска можно нажать клавишу слеш (/) и ввести “ru”

Язык локали выбирается аналогичным образом, нажимаем на данный пункт, затем слеш и вводим “ru”, тут необходимо выбрать “ru_RU.UTF-8”

Кодировка локали должна определится автоматически, если этого не произошло, заходим и выбираем ее вручную – UTF-8

## Пункт Диски

Переходим к выбору дисков, на которые будет установлен Arch Linux. Обратите внимания, что при установке Arch Linux с помощью скрипта archinstall ручная разметка дисков на данный момент работает плохо, по этому, при автоматической разметке имейте в виду, что вся информация на диске будет стерта. Итак, выбираем пункт “Диск(и)”

В открывшемся окне выбираем диск на который хотим установить Arch Linux и нажимаем “Enter”

## Разметка диска

Далее переходим в пункт ‘Разметка диска” и тут указываем пункт “Стереть все выбранные диски и использовать оптимальную схему разделов по умолчанию”

Определяемся с файловой системой, для примера выберу старую добрую ext4, которая является стабильной и проверенной временем

Шифровать диск на данный момент не будем, так как это не имеет смысла на домашней машине, а соответственно, пропускаем данный пункт установки.

## Установка загрузчика

Переходим к выбору загрузчика, оставляем по умолчанию grub-install, так как загрузчик grub вполне актуален и справляется с загрузкой системы на ура. Да и в любой момент можно установить другой загрузчик уже в установленной системе

## Пункт подкачка

По умолчанию подкачка уже включена, так что, если она вам нужна, то оставляем все как есть, если же вы хотите отключить подкачку, то переходите в данный пункт и выбираете – “нет”. В любом случае пусть подкачка все же будет и не пригодится, чем пригодится, но ее не окажется в нужный момент

Замечу, что мы сейчас говорим не о разделе подкачки, а о zram. Zram сжимает содержимое в оперативной памяти, подробнее о zram вы можете прочесть тут.

## Хост и пользователи

Далее у нас пункт “Имя хоста”, это имя вашего компьютера, по умолчанию – “archlinux”, вы же можете задать иное имя сейчас, либо, изменить при необходимости его в установленной системе. Что бы изменить имя хоста сейчас, переходим в пункт “Имя хоста” и вписываем своем, для примера, задам имя – Arch Linux

Придумываем пароль для root пользователя, переходим в соответствующий пункт (Пароль root) и вводим свой пароль, после чего необходимо его подтвердить, введя еще раз. Замечу, что при вводе пароля он отображаться не будет

Пришло время создать учетную запись вашего пользователя, под которым вы будете работать в Arch Linux, когда установите его. Создаем учетную запись, введя имя пользователя строчными буквами. Нажимаем “Enter” после чего нас попросят ввести пароль для только что созданного нового пользователя

При создании нового пользователя рекомендую сразу добавить его в группу sudo, что б была возможность после установки Arch Linux сразу начать пользоваться правами суперпользователя. Для этого, при создании вашего пользователя, в появившемся окне выбираем – да

Затем подтверждаем наше решение указав соответствующий пункт – “Подтвердить и выйти”

## Установка рабочего окружения

При установке через скрипт archinstall можно сразу выбрать какое окружение рабочего стола установить, для этого переходим в пункт “Профиль”. Тут стоит отметить, что если вы впервые ставите систему, либо хотите сразу приступить к настройке то выбираем первый пункт – “desktop: Предоставляет выбор окружений рабочего стола и тайловых оконных менеджеров”. Его мы и выберем в данный момент, можно конечно выбрать еще пункт “minimal”, но в этом случае у вас не будет возможности выбора рабочего окружения

Затем определяемся из приведенного списка какое окружения рабочего стола хотим установить, тут дело вкуса и личных предпочтений

После чего выбираем драйвер для вашей видеокарты, для пользователей NVIDIA выбираем NVIDIA (Proprietary), для пользователей AMD оставляем самый верхний пункт – AMD / ATI (open-source) соответственно

## Звуковой сервер

Нажив на пункт “Звуковой сервер” выбираем из списка, что установить, на данный момент можно установить либо pipewire, либо pulseaudio. Что выбрать, решаете вы сами, в любом случае, pipewire вроде зарекомендовал себя с положительной стороны

## Установка ядра

Переходим к установке ядра, выбрав данный пункт вам будет предложено на выбор несколько версия ядра операционной системы. По умолчанию выбрано последнее доступное ядро в репозиториях Arch Linux, вы можете выбрать также и другие версии, например LTS – с длительной поддержкой

## Дополнительные пакеты

Тут указываем то, что хотим установить в Arch Linux при инсталляции системы, как вариант, установим сразу браузер Firefox и chromium, просто вписав название этих двух программ

## Настройка сети

Крайне важный пункт, без которого вы рискуете оказаться в установленной системе, но без возможности выйти в сеть. Устанавливаем NetworkManager выбрав соответствующий пункт в меню – “Использовать NetworkManager…”

Для более продвинутых пользователей есть пункт ручной настройки.

## Часовой пояс

Указываем ваш часовой пояс, выбрав его из списка. Для более быстрого поиска можно воспользоваться клавишей слеш (/) и ввести хотя бы начальные буквы вашего часового пояса

Пункт автоматической синхронизации можно оставить по умолчанию, так как она уже включена.

## Дополнительные репозитории

В дополнительных репозиториях можно выбрать multilib либо ветку testing. Что касается репозитория testing, то его выбирать не желательно, так как в этом случае пакеты при обновлении будут устанавливаться именно из тестового репозитория, что может сказаться негативно на стабильности Arch Linux. А вот multilib вполне можно включить

Вот и все, предварительная настройка Arch Linux при помощи скрипта archinstall готова, можно приступать к установке. 

***Нажимаем на пункт “Установить”***

Затем подтверждаем установку нажав “Enter” и наблюдаем за происходящим процессом

После завершения установки, осталось ответить на последний вопрос – использовать chroot или нет. Chroot — операция изменения корневого каталога диска для запущенного процесса и его дочерних процессов. Программа, запущенная в таком окружении, не может получить доступ к файлам вне нового корневого каталога. Более подробно про chroot можно прочесть в **ArchWIKI**

Теперь перезагружаем систему введя команду reboot и загружаемся в установленный Arch Linux

## Установка yay

После того как вы установите Arch Linux и загрузитесь в систему, необходимо установить пакет “yay” без которого вы не сможете пользоваться репозиторием AUR. А AUR это сокровищница Arch Linux. Для установки yay открываем терминал, установим пакет git, который позволит клонировать yay в нашу систему, где в дальнейшем мы его и соберем:

**sudo pacman -Syyu git**

Теперь клонируем yay, выполнив команду

 **“git clone https://aur.archlinux.org/yay.git”** 

после чего переходим в директорию “yay”, собираем пакет и устанавливаем.

*Выполним все эти действия одной командой:*

**git clone https://aur.archlinux.org/yay.git && cd yay && makepkg -si**
