---
layout: post
title:  qemoo - обертка для qemu
category: Trisquel
---

#gqemu

## GQemoo

Графический интерфейс для qemoo - скрипта-оболочки для qemu для запуска и установки гостевых систем.

Пожалуй, самый простой и понятный тандем для работы с виртуальными машинами в QEMU. 

Минимальные настройки для запуска и установки виртуальных машин: `RAM, SIZE` (размер диска для установки) и количество ядер процессора (-smp X и другие параметры) в `QEMUADD` поле.

Идеально подходит для тестирования / установки любых дистрибутивов Linux / Windows.

проект qemoo: https://abf.io/import/qemoo

qemoo rpm: [qemoo-x.x-x-rosa2021.1.noarch.rpm](https://mirror.yandex.ru/rosa/rosa2021.1/repository/x86_64/contrib/release) (Ctrl + F)

Бесплатные иконки: https://www.flaticon.com

Зависимости для виртуальных машин: `xrandr spice-vdagent`

зависимости GQemoo: `qemoo qemu gtk2 virt-viewer rsync polkit`

## Горячие клавиши GQemoo:

+ `Esc` - Отмена клонирования изображения .qcow2
+ `F12` - Обновить список подключенных устройств
+ `Ctrl+Q` - Принудительный сброс всех процессов QEMU

Поддерживается загрузка и установка виртуальных машин с флэш-накопителей, образов (.img, .iso, .qcow2, .raw, .vdi, .vmdk, .vpc) и уже установленных образов `*.qcow2`. Перед загрузкой виртуальной машины вы можете подключить дополнительные флэш-накопители, образы и блочные устройства. Также поддерживаются двунаправленные Clipboard и Drag&Drop.

Общий каталог `~/qemoo_tm` (Хост) <> `~/hostdir` (Гостевой), а также автоматическое масштабирование окна виртуальной машины `XResize` включаются путем вставки встроенных скриптов из буфера обмена.

Примечание: Вам нужно добавить пользователя в группы `disk,kvm` и перезагрузиться: `usermod -aG disk,kvm $(logname); reboot`

Для поддержки перетаскивания + двунаправленный буфер обмена в гостевой системе должна быть установлена `spice-vdagent` (Linux, обычно уже установленная) или [spice-guest-tools](https://www.spice-space.org/download/windows/spice-guest-tools/spice-guest-tools-latest.exe) (Windows).

![qemoo](img/gqemoo/ScreenShot8.png)

## В контриб добавлен пакет - qemoo

qemoo - обертка для qemu, которая позволяет запускать гостевые системы без необходимости заучивать километровые портянки параметров qemu.
Такие скрипты есть у многих, были такие и у нас с ilfat, в какой-то момент решили собрать идеи в кучу и опакетить.
Это ни разу не аналог вирт-манагера, а всего лишь способ быстро загрузиться с исо, флешки, img, qcow2 без кипячения мозга и мышетыканья.

=============================================================================
Утилитка имеет встроенный хелп и небольшой конфиг, но в большинстве случаев просто передайте ей то с чего надо грузить.

- qemoo Rosa.iso

- qemoo /dev/sda

- qemoo ./Rosa.qcow2

и т.д.

## Возможна установка, для этого добавляем ключик -i

- qemoo -i Rosa.iso

- qemoo -i /dev/sdb

утилита создаст в текущем каталоге образ qcow2 и подключит его при старте, после инсталляции можно грузиться с образа этим же 

- qemoo

- qemoo _qemoo1_ROS.qcow2 (имена образов генерируются, но можно и задать)

## Можно грузить с efi, добавляем ключик -e

- qemoo -e Rosa.iso

Можно грузить с iso так, как загрузка шла бы если раскатать исо на флешку.

- qemoo -l Rosa.iso

или с efi

- qemoo -l -e Rosa.iso

Можно прокинуть при загрузке usb устройство целиком, например для 4G модемов с sd картой куда установлена ОС или барий на токене

- qemoo -L /dev/sdb

Можно не запускать гостевую систему, а только сгенерировать cmdline, ключик -S

- qemoo -e -S Rosa.iso

Можно добавлять свои параметры для qemu в конце строки после --

- qemoo -e -S Rosa.iso -- -smp 4

Аналогичное можно сделать и в конфиге - /etc/qemoo.cfg или одноименном файле в текущем каталоге.

При каждой загрузке в гостевую ОС пробрасывается папка ( по умолчанию ./ ), как подключить ее в гостевой ОС линукс будет написано в консоль при старте

