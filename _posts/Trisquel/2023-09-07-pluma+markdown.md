---
layout: post
title:   pluma+markdown
category: Trisquel
---

## Обзор

pluma-markdown добавляет поддержку Markdown (или Markdown Extra) в pluma, текстовом редакторе MATE DE по умолчанию.

В частности, он добавляет:

Подсветка синтаксиса Markdown и фрагменты;

плагин Markdown Preview для pluma, отображаемый на боковой панели или нижней панели и обеспечивающий предварительный просмотр текущего документа или выделенной области в формате HTML (этот плагин также можно использовать в качестве веб-браузера; см. Раздел Использование);

внешний инструмент, экспортирующий в HTML текущий документ или выделенный фрагмент;

необязательная цветовая схема, выделяющая файлы Markdown способом, более похожим на рендеринг HTML.

## Требования:

pluma-markdown поддерживает pluma 1.24 (как в Ubuntu 20.04 LTS, 20.10, 21.04). Он поставляется с установщиком для GNU / Linux.

Предварительный просмотр уценки плагина зависит от пакета python-markdown.

Для пользователей Ubuntu (и, возможно, других дистрибутивов) должны быть установлены пакеты python3-markdown и gir1.2-webkit2-4.0 для использования плагина Markdown Preview.

## Просто установите все необходимое с помощью:

- sudo apt-get install python3-markdown gir1.2-webkit2-4.0.

## Установка (или обновление)

Загрузите архив pluma-markdown

Извлеките архив.

Откройте терминал в извлеченной папке.

Запустите программу установки в терминале:

- ./pluma-markdown.sh install

## Или программно:

- cd ~/Downloads

- wget https://github.com/N0rbert/pluma-markdown/archive/master.zip

- unzip master.zip

- cd pluma-markdown-master

- ./pluma-markdown.sh install

Поддержка Markdown будет добавлена для текущего пользователя (поэтому не нужны привилегии root). Папка, созданная при извлечении, может быть удалена после установки.

## Удаление

Откройте терминал в извлеченной папке.

## Запустите программу удаления в терминале:

- ./pluma-markdown.sh uninstall

## Использование

Прежде всего, перезапустите pluma, если он уже запущен.

Подсветка синтаксиса

Подсветка синтаксиса должна автоматически активироваться для файлов, распознанных как файлы Markdown (расширения .markdown, .md или .mkd), в противном случае выберите ее вручную, перейдя в Просмотр> Режим выделения> Разметка и выбрав Markdown.

## Предварительный просмотр плагина Markdown

Чтобы включить этот плагин, перейдите в Правка> Настройки> 
Плагины и проверьте Предварительный просмотр Markdown.

В меню pluma добавлены два пункта Инструменты:

Обновить предварительный просмотр Markdown: отображает на боковой панели или на нижней панели предварительный просмотр текущего документа или выделенной области в формате HTML.

Примечание: есть два других способа обновить предварительный просмотр:

- with the keyboard shortcut *Ctrl+Alt+m* (can be changed in the configuration file);

- by right clicking on the preview area (side or bottom panel) and selecting the item *Update Preview*.

Переключить видимость предварительного просмотра Markdown: позволяет отображать или скрывать вкладку панели предварительного просмотра Markdown.

Примечание: для выполнения того же самого можно использовать сочетание клавиш Ctrl + Alt + v (может быть изменено в файле конфигурации).

При щелчке правой кнопкой мыши на области предварительного просмотра появляется контекстное меню со списком нескольких опций. Помимо стандартных (предыдущая страница, следующая страница, копировать и т.д.), У нас есть:

Скопируйте текущий URL: скопируйте в буфер обмена URL документа или страницы, отображаемой на вкладке предварительного просмотра. Если это документ, который еще не был сохранен на диск, этот пункт меню отключен.

Перейти по другому URL: позволяет вручную ввести локальный или удаленный URL документа или страницы для посещения на вкладке предварительного просмотра.

Один из следующих двух вариантов, в зависимости от значения свойства externalBrowser в файле конфигурации:

Открыть во внешнем браузере: позволяет открыть ссылку во внешнем браузере.

Открыть во встроенном браузере: позволяет открыть ссылку на панели.

Предварительный просмотр обновлений: перезагружает на боковой панели или в нижней панели предварительный просмотр в формате HTML текущего документа или выделения.

Очистить предварительный просмотр: очистить содержимое вкладки предварительного просмотра.

Фрагменты

Чтобы использовать фрагменты уценки, активируйте фрагменты плагина в Правка > Настройки> Плагины. Затем перейдите в Инструменты > Управление фрагментами... чтобы увидеть возможности.

Экспорт в HTML с помощью внешнего инструмента

Чтобы использовать внешний инструмент, активируйте плагин Внешние инструменты в Правка > Настройки> Плагины. Затем перейдите в Инструменты > Внешние инструменты > Экспорт в HTML, чтобы получить доступ к инструменту. Сочетание клавиш Ctrl + Alt + h делает то же самое. Код текущего открытого файла Markdown или выделенный фрагмент будет преобразован в HTML, а результат будет помещен в новый документ.

Чтобы отредактировать инструмент, перейдите в Инструменты> Управление внешними инструментами ....

Дополнительная цветовая схема

Pluma-markdown устанавливает дополнительную цветовую схему. Чтобы использовать его, перейдите в Правка > Настройки > Шрифт и цвета> Цветовая схема в pluma и выберите Классический Markdown. Эта цветовая схема больше похожа на рендеринг HTML, например, сильные акценты и заголовки выделены жирным шрифтом и черным шрифтом, ссылки синими и подчеркнутыми и т.д.

Файл конфигурации

Конфигурационный файл pluma-markdown выглядит следующим образом:

$XDG_CONFIG_HOME/pluma/pluma-markdown.ini

В большинстве случаев это будет соответствовать:

$HOME/.config/pluma/pluma-markdown.ini

Раздел markdown-preview содержит несколько свойств:

externalBrowser: по умолчанию ссылки открываются во внешнем браузере. Возможные значения: 0 (не открывать ссылки во внешнем браузере по умолчанию; значение по умолчанию) или 1 (открывать ссылки во внешнем браузере по умолчанию).

Если externalBrowser имеет значение 0, контекстное меню, отображаемое при щелчке правой кнопкой мыши по ссылке, будет содержать опцию открытия ссылки во внешнем браузере. Если externalBrowser равно 1, контекстное меню будет содержать опцию для открытия ссылки во встроенном браузере.

panel: размещение предварительного просмотра. Возможные значения: bottom (значение по умолчанию) или side.

shortcut: ярлык для обновления предварительного просмотра. Значение по умолчанию равно <Control><Alt>m.

version: версия Markdown для предварительного просмотра HTML и экспорта в HTML. Возможные значения: extra (значение по умолчанию) или standard.

visibility: видимость вкладки панели предварительного просмотра Markdown при запуске pluma. Возможные значения: 0 (скрытый) или 1 (отображаемый; значение по умолчанию).

visibilityShortcut: ярлык для переключения видимости предварительного просмотра Markdown. Значение по умолчанию равно <Control><Alt>v.

Подробности и ограничения

Подсветка синтаксиса и фрагменты для стандартной Markdown были официально добавлены в GtkSourceView и gedit > 3.1.1. Установщик pluma-markdown гарантирует, что никакие уже существующие файлы не будут скопированы (проверка Markdown Extra не выполняется, поскольку это не версия по умолчанию, поставляемая с GtkSourceView и gedit > 3.1.1).

Поскольку HTML-код можно напрямую использовать в тексте, написанном на Markdown, подсветка синтаксиса HTML была добавлена к подсветке синтаксиса Markdown. Однако имейте в виду, что, даже если они выделены, синтаксис Markdown в HTML-блоках (например, <div>) и дополнительный синтаксис Markdown в HTML-блоках без markdown атрибута, установленного в 1 (например, <div markdown="1">), не обрабатываются, даже если они выделены.

Внутри абзаца текст, заключенный в обратные метки, указывает на диапазон кода. Markdown позволяет использовать одну или несколько обратных меток для переноса текста при условии, что их количество одинаково с обеих сторон, и в тексте отсутствует одинаковое количество последовательных обратных меток. Примеры:

  `lorem lorem lorem lorem`

  `lorem lorem `` lorem lorem`

  `lorem lorem ````` lorem lorem`

  ``lorem lorem lorem lorem``

  ``lorem lorem ` lorem lorem``

  ``lorem lorem ````` lorem lorem``

Подсветка синтаксиса в pluma поддерживает выделение промежутка кода с помощью до 2 обратных меток, окружающих текст.

Цитата из блока может содержать элементы уровня блока и встроенные элементы Markdown, но pluma-markdown выделяет только встроенные элементы (акцент, ссылку и т.д.).

Невозможно выполнить полный контекстный анализ (поскольку разрыв строки нельзя использовать в регулярных выражениях). Вот некоторые последствия:

Согласно синтаксису Markdown, чтобы написать несколько абзацев в элементе списка, мы должны сделать отступ в каждом абзаце. Пример:

  - Item A (paragraph 1).

  	Item A (paragraph 2).

  	Item A (paragraph 3).

  - Item B.

Таким образом, с точки зрения подсветки синтаксиса существует конфликт между абзацем с отступом внутри элемента списка (4 пробела или 1 табуляция) и строкой кода с отступом вне списка (также 4 пробела или 1 табуляция). Был сделан выбор выделить блок кода только с 2 уровнями отступа.

Сопоставляется и выделяется только подчеркивание заголовка в стиле Setext, поэтому нет гарантии, что это действительно подчеркивание заголовка.

При использовании Markdown Extra некоторые элементы сопоставляются и выделяются без гарантии того, что они находятся в правильном контексте: атрибут идентификатора заголовка в стиле Setext, двоеточие, используемое в качестве разделителя в списке определений, и разделительная строка таблицы.

Локализация

Плагин Markdown Preview является локализуемым. Файл, содержащий строки, является plugins/markdown-preview/locale/markdown-preview.pot.