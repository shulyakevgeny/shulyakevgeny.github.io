---
layout: post
title:  Процессы
category: Diagnostics
---

## Процессы

*Каждый процесс в Linux имеет свой идентификатор, называемый PID. Перед тем, как выполнить остановку процесса, нужно определить его PID*

- ps axu  --	Утилита отчета о состоянии процесса ps. Команда выведет список всех процессов.

- ps aux \| grep имя_процесса  --	Узнать PID конкретного процесса через поиск через grep

- ps aux \| grep имя_процесса \| grep -v grep  --	Вывести процесс исключая из поиска grep

- pgrep имя_процесса  --	Утилита вывода только информации PID

- pgrep -f имя_процесса  --	Если нужно искать только по имени процесса, то надо указать опцию -f

- pidof имя_процесса  --	Утилита ищет PID конкретного процесса по его имени. Имя процесса должно только совпадать с искомым

- pidof -s имя_процесса  --	С помощью опции -s можно попросить утилиту выводить только один PID

- pstree  --	Утилита позволяет посмотреть список дочерних процессов для определённого процесса, также их PID

- pstree -p \| grep имя_процесса  --	Cмотрим дерево процессов для конкретного процесса. Например, мы хотим удалить какой-либо файл, а система нам сообщает, что он используется другим процессом.

- kill номер_процесса  --	Убьет процесс с номером PID

- kill -9 номер_процесса --	Посылает сигнал убить процесс по SIGKILL (он имеет номер 9) процессу PID

- killall имя_процесса --	 Убьет все процессы с заданным именем (по имени процесса)

- killall -s 9 имя_процесса  --	Убьет все процессы с заданным именем, шлет сигнал SIGTERM

- lsof /home/юзер/файл.aac  --	С помощью утилиты lsof можно посмотреть, какие процессы используют директорию или файл в данный момент

- fuser /home/юзер/файл.aac --	Есть ещё одна утилита, которая позволяет выполнить подобную задачу.
После PID идёт одна буква, которая указывает, что делает этот процесс с файлом или папкой:

• c - текущая директория;

• r - корневая директория;

• f - файл открыт для чтения или записи;

• e - файл выполняется как программа;

• m - файл подключен в качестве библиотеки.

- auditd --	Аудит системных событий в Linux

- ss -lptn 'sport = :80' --	Иногда необходимо узнать PID Linux-программы, которая использует сетевой порт, например 80. Для этого можно использовать утилиту ss 
