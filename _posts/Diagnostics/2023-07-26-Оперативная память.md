---
layout: post
title:  Оперативная память
category: Diagnostics
---

## Оперативная память

- cat /proc/meminfo  --	Информация об объеме RAM, SWAP и другая информация

- free -m  --	Общий объем памяти (RAM, SWAP), количество использованной, свободной памяти в МБайтах

- free -m -s 5 -- 	Вывод в других единицах — с ключами:-b байтах; -m мегабайтах; -g гигабайтах, -s запустить с заданным периодом обновления информации

- free -m \| awk 'NR==2{printf "Memory Usage: %s/%sMB (%.2f%%)\n", $3,$2,$3*100/$2}  --	Расчет использования оперативной памяти

## Очистка кэша памяти

- free -h  --	Посмотреть размер страничного кэша можно в последней колонке - cached

- cat /proc/slabinfo | egrep dentry\|inode --	Просмотр кэша inode и dentrie, относящихся к файловой системе.
В него записываются не сами данные, а структура файловой системы, расположение файлов и папок.

- sync; echo 1 > /proc/sys/vm/drop_caches  --	Очистка кэша PageCache

- sync; echo 2 > /proc/sys/vm/drop_caches  --	Очистка inode и dentrie

- sync; echo 3 > /proc/sys/vm/drop_caches  --	Очистка inode и dentrie и PageCache

## Примечание

***Описание колонок в выводе команды free***
```
 total — общее количество памяти;

 used — реально использующая в данный момент и 
 зарезервированная системой память;

 free — свободная память (total минус used);

 shared — Shared memory или Разделяемая память, можно посмотреть командой ipcs;

 buffers — буферы в памяти — страницы памяти, зарезервированные системой для выделения их процессам, когда они затребуют этого, так же известна как heap-memory;
 
 cached — файлы, которые недавно были использованы системой/процессами и хранящиеся в памяти на случай если вскоре они снова потребуются.
```
## Виды кэша

- PageCache или страничный кэш -- это место, куда ядро складывает все данные, которые были записаны или считаны из диска.

- Кэш inode и dentrie -- тоже относится к файловой системе. Только в него записываются не сами данные, а структура файловой системы, расположение файлов и папок.

# Тестирование оперативной памяти

## Если Вы используете RescueLiveCD, то:

- Для запуска Memtest в меню syslinux вместо Rescue LiveCD выберите соответствующий пункт.

## Если Вы используете установленную систему, то:

- Для запуска Memtest выберите соответствующий пункт в меню GRUB

Последующий процесс диагностики заключается в проведении нескольких этапов тестирования каждого отдельного модуля ОЗУ.

Данный процесс будет выполнятся бесконечно, пока вы не остановите его. Вам нужно дождаться окончания хотя бы одного цикла проверки. (значение Pass должно быть >= 1). 

## Что делать при появлении ошибок

Если при тестировании появляются ошибки, значит, оперативная память (устройство) битая/разогнанная/запылилась и ее надо заменить/согнать/пропылесосить (возможны также проблемы с охлаждением или системной шиной). 
