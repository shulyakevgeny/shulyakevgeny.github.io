---
layout: post
title: ОПТИМИЗАЦИЯ,КОНВЕРТАЦИЯ ИЗОБРАЖЕНИЙ LINUX (Jpegoptim,Optipng,ImageMagick-convert)
category: ConsoleUtilities
---

#сжатие #jpg #png #pdfjpg #оптимизация

## ОПТИМИЗАЦИЯ_ИЗОБРАЖЕНИЙ_LINUX

<mark>jpegoptim</mark> - утилита для оптимизации и сжатия изображений без потери качества в формате JPEG;

### Установка Jpegoptim

Для установки утилиты в Ubuntu, Debian и основанных на нем дистрибутивах выполните:

- sudo apt install jpegoptim

### Как использовать jpegoptim

Давайте рассмотрим как пользоваться jpegoptim. Использовать утилиту для сжатия изображений linux очень просто. Для этого достаточно выполнить программу и передать ей имя файла. Вот такой синтаксис:

$ jpegoptim опции имя_файла.jpeg

### Рассмотрим опции утилиты:

- -d - указать папку, в которую нужно сохранять готовые изображения;

- -f - принудительная оптимизация;

- -m - показатель качества, отменяет сжатие без потерь и устанавливает уровень качества от 0 до 100, чем больше, тем лучше;

- -n - не выполнять реальную оптимизацию, а только показать результат;

- -S - задать размер готового изображения, можно указать в процентах или килобайтах;

- -o - заменить исходный файл;

- -p - сохранить временные метки;

- -P - сохранить права файла.

### А теперь, давайте рассмотрим как оптимизировать изображения в linux с помощью jpegoptim. Сначала посмотрим исходный размер:

- $ du image.jpg

Дальше выполняем самую простую оптимизацию:

- $ jpegoptim image.jpg

Затем опять смотрим размер:

- $ du image.jpg

Если хотите, вы можете сжать изображение до определенного размера, но тогда без потерь не получится:

- $ jpegoptim --size=250k image.jpeg

Изображение будет сжато, но качество заметно ухудшится. Если изображений много, то вы можете очень просто использовать пакетное сжатие, для этого просто перейдите в папку с изображениями, а потом выполните команду сжатия указав вместо файла маску, например:

- $ cd images/

- $ jpegoptim *.jpg

Также вы можете перечислить несколько изображений за раз:

- $ jpegoptim image1.jpg image2.jpg

Чтобы оптимизировать все изображения в определенной папке можно использовать команду xargs вместе с find. Например, сжимаем все изображения в текущей папке с перемещением в папку ~/compressed:

- $ find . -name "*.jpg" | xargs jpegoptim -d ~/compressed -p

Вот и все, теперь вы знаете как сжать jpg изображения в Linux. Дальше мы поговорим о том, как сжать png. Это тоже очень просто.


---


<mark>optipng</mark> - это небольшая программа, которая позволяет уменьшить размер PNG изображений без потери качества.

### Установка optipng

Если вы используете Ubuntu, то программа есть в официальных репозиториях и вы можете ее очень просто установить. Для установки optipng в Debian, Ubuntu и производных наберите:

- sudo apt install optipng

### Сжатие изображений с помощью optipng

Синтаксис утилиты очень прост. Вы можете использовать ее точно так же как и jpegoptim:

- $ optipng опции имя_файла.png

Давайте рассмотрим опции утилиты:


-backup - сохранять копии измененных файлов;


-dir - папка для записи файлов;


-force - принудительная запись исходящего файла;


-out - записать исходящий файл в указанный;


-simulate - не выполнять никаких действий, а только показать результат;

-o - установить уровень сжатия от 0 до 7.

Теперь попробуем оптимизировать png в linux. Сначала посмотрим размер файла:

- df -h image.png

Чтобы выполнить сжатие изображений используйте следующую команду:

- $ optipng image.png

Напоминаю, что тут тоже сжатие png linux изображений без потерь, а это значит, что вы получите точно такое же изображение только меньшего размера. Также можно указать уровень сжатия, он не влияет на качество картинки, но от него напрямую зависит время работы программы. 

Значение может быть от 0 до 7 и чем больше, тем сильнее сжатие и тем дольше будет идти обработка:

- $ optipng -o 7 impge.png

Для пакетной обработки изображений можно использовать тот же принцип, что и в работе с jpeg:

- $ cd images/

- $ optipng *.png

## JPG в PDF в Linux с помощью ImageMagick

Вы должны будете выполнить следующие действия, если хотите преобразовать JPG в PDF с помощью ImageMagick (включая несколько JPG в PDF).

**Шаг 1.** Щелкните правой кнопкой мыши на рабочем столе и выберите параметр "Открыть терминал здесь".

- convert *.jpg *.pdf

---

Шаг 2. Чтобы конвертировать фотографии в PDF, просто используйте команду конвертировать:

- $ sudo convert /path/to/image /path/to/pdf

- $ sudo convert /home/ubuntu/flower.jpg to /home/files/flowers.pdf

---

Шаг 3. Используйте команду mogrify с параметром -format для преобразования нескольких фотографий. 

Все файлы ***JPG*** в каталоге ***/home/ubuntu*** будут преобразованы в файлы ***PDF*** с помощью этой команды:

- $ mogrify -format pdf /home/ubuntu/*.jpg

- $ mogrify -format pdf -path /home/data /home/ubuntu/*.jpg

---

## Объединить Несколько PDF в Один

- $ convert FILE1.pdf FILE2.pdf OUTPUT.pdf

---